# 動漫元素週期表卡片專案

## 📋 專案概念

將化學元素週期表的 118 個元素，與**各大動漫 IP 的代表性角色**進行配對，生成高質感的卡片圖片，適用於 LINE Bot、教育內容或收藏。

### 🎯 核心理念

- **跨 IP 整合**：不限於單一動漫，涵蓋所有經典動漫作品
- **代表性角色**：每個元素配對該 IP 最具代表性的角色
- **教育娛樂**：結合化學知識與動漫文化
- **高質感設計**：適合手機顯示，檔案大小 < 300KB

---

## 🎨 設計規格

### 圖片規格

| 項目 | 規格 | 說明 |
|------|------|------|
| **長寬比** | 1:2 (寬:高) | 例：512×1024px |
| **檔案格式** | JPEG | 高壓縮率 |
| **檔案大小** | < 300KB | LINE Bot 限制 |
| **DPI** | 120 | 手機顯示優化 |
| **字體** | Microsoft JhengHei | 中文正體 |

### 卡片結構

```
┌─────────────────┐
│                 │
│   角色圖片      │  60% - 動漫角色立繪/場景
│   (AI 生成)     │
│                 │
├─────────────────┤
│ 元素符號 + 序號 │  20% - Gemini 生成（帶顏色背景）
├─────────────────┤
│  中文標籤區     │  20% - Matplotlib 後製
│  - 元素名稱     │
│  - 族群         │
│  - 陰電性       │
│  - 角色名稱     │
│  - 特性關聯     │
└─────────────────┘
```

---

## 📊 目前進度

### ✅ 已完成

- [x] 技術驗證：Gemini API 圖片生成
- [x] 技術驗證：Matplotlib 中文標籤
- [x] 技術驗證：1:2 比例調整
- [x] 技術驗證：檔案大小壓縮 (< 300KB)
- [x] 批次生成腳本（雙 API 並行）
- [x] 速率限制控制（避免 API quota）
- [x] 測試案例：火影忍者 118 張（122 張已生成）

### 🔨 待優化

#### 1. Gemini 圖片品質問題

**現況問題**：
- 🚫 原子序號有時未顯示
- 🚫 底圖比例不穩定（1.50 ~ 2.99）
- 🚫 角色細節不夠精緻
- 🚫 背景色塊不夠清晰

**解決方向**：
- [ ] 強化 Prompt 工程（更明確的指令）
- [ ] 嘗試 Gemini 2.5 Flash Image 模型
- [ ] 或改用 DALL-E 3 / Midjourney API
- [ ] 分離生成：角色圖 + 元素背景分開生成再合成

#### 2. 角色與元素配對邏輯

**現況**：基於火影忍者單一 IP，配對邏輯單一

**待改進**：
- [ ] 設計跨 IP 配對規則
- [ ] 元素特性 vs 角色特性的對應表
- [ ] 考慮元素族群與動漫類型的關聯

---

## 💡 新概念：跨動漫 IP 元素表

### 配對思路

#### 方案 A：依元素特性選擇 IP

| 元素族群 | 特性 | 適合的動漫 IP |
|---------|------|--------------|
| **鹼金屬** | 爆炸、活潑 | 《咒術迴戰》爆發系角色 |
| **鹼土金屬** | 堅固、防禦 | 《進擊的巨人》硬化能力 |
| **過渡金屬** | 金屬、武器 | 《鋼之鍊金術師》煉金術 |
| **鹵素** | 腐蝕、毒 | 《鬼滅之刃》毒系血鬼術 |
| **惰性氣體** | 穩定、超然 | 《一拳超人》琦玉 |
| **鑭系/錒系** | 稀有、強大 | 《龍珠》賽亞人 |

#### 方案 B：IP 輪替分配

將 118 個元素**均勻分配**給不同動漫 IP：

| IP | 元素數量 | 代表元素 |
|----|---------|---------|
| **火影忍者** | 20 | 1-20 |
| **海賊王** | 20 | 21-40 |
| **鬼滅之刃** | 15 | 41-55 |
| **咒術迴戰** | 15 | 56-70 |
| **進擊的巨人** | 10 | 71-80 |
| **鋼之鍊金術師** | 10 | 81-90 |
| **龍珠** | 10 | 91-100 |
| **一拳超人** | 8 | 101-108 |
| **死神** | 10 | 109-118 |

#### 方案 C：最具代表性角色優先

每個元素選擇**最符合該元素特性**的動漫角色，不限 IP：

**範例**：
- **H (氫)**：魯夫（海賊王）- 最輕、最多、橡膠彈性
- **He (氦)**：琦玉（一拳超人）- 穩定、無敵
- **C (碳)**：愛德華（鋼鍊）- 有機生命基礎
- **Fe (鐵)**：艾倫（進擊）- 鋼鐵意志
- **Au (金)**：吉連（龍珠）- 最強、最珍貴
- **U (鈾)**：魔人普烏（龍珠）- 毀滅級力量

---

## 🗂️ 資料結構設計

### 元素資料格式

```json
{
  "atomic_number": 1,
  "symbol": "H",
  "name": "氫",
  "name_en": "Hydrogen",
  "group": "1A族（鹼金屬）",
  "electronegativity": "2.20",
  "color": "#FF6B6B",

  "character": {
    "name": "魯夫",
    "name_en": "Luffy",
    "anime_ip": "海賊王",
    "anime_ip_en": "One Piece",
    "description": "草帽海賊團船長，橡膠果實能力者",
    "key_feature": "最輕、最多、彈性無限",
    "prompt_description": "Luffy with straw hat, red vest, smiling, Gear 5 white hair form"
  }
}
```

---

## 📁 專案結構

```
anime-element-cards/
├── README.md                    # 本檔案
├── PENDING.md                   # 待辦事項與靈感記錄
├── CHANGELOG.md                 # 版本變更記錄
│
├── data/
│   ├── elements.json           # 118 元素完整資料
│   ├── character_mapping.json  # 角色配對表
│   └── ip_list.json            # 動漫 IP 清單
│
├── scripts/
│   ├── generate_cards.py       # 主生成腳本
│   ├── gemini_api.py           # Gemini API 包裝
│   ├── image_processing.py     # 圖片後處理
│   └── batch_generator.py      # 批次生成工具
│
├── prompts/
│   ├── base_prompt.txt         # 基礎 Prompt 模板
│   ├── ip_specific/            # IP 專屬 Prompt
│   │   ├── naruto.txt
│   │   ├── onepiece.txt
│   │   └── ...
│   └── prompt_optimization.md  # Prompt 優化筆記
│
├── output/
│   ├── naruto_v1/              # 火影版本（已生成）
│   │   ├── base/               # 底圖
│   │   └── final/              # 最終圖片
│   └── multi_ip_v2/            # 跨 IP 版本（待生成）
│
├── tests/
│   ├── test_generation.py      # 生成測試
│   └── test_quality.py         # 品質檢測
│
└── docs/
    ├── design_guide.md         # 設計規範
    ├── api_usage.md            # API 使用說明
    └── troubleshooting.md      # 問題排查
```

---

## 🚀 下一步計劃

### Phase 1: 資料準備（預計 1-2 天）

- [ ] 整理 118 元素完整資料
- [ ] 選定 10-15 個動漫 IP
- [ ] 設計角色與元素配對表（根據選擇的方案）
- [ ] 撰寫每個角色的 AI prompt description

### Phase 2: 技術優化（預計 2-3 天）

- [ ] 優化 Gemini Prompt（確保原子序號顯示）
- [ ] 測試 Gemini 2.5 Flash Image 模型
- [ ] 調整圖片後處理流程（確保 1:2 比例）
- [ ] 實作品質檢測腳本（自動檢查比例、大小、清晰度）

### Phase 3: 批次生成（預計 1 天）

- [ ] 設定速率限制（避免 API quota）
- [ ] 執行批次生成（118 張）
- [ ] 品質檢查與篩選
- [ ] 問題圖片重新生成

### Phase 4: 應用整合（預計 1-2 天）

- [ ] LINE Bot Flex Message 設計
- [ ] 題庫系統整合
- [ ] 使用者互動設計

---

## 📝 技術筆記

### Gemini API 使用

**目前使用的模型**：
```python
model='gemini-2.0-flash-exp-image-generation'
```

**速率限制**：
- 每分鐘 10 個請求
- 建議：每 6.5 秒生成 1 張

**API Keys**：
- napesone: AIzaSyByuF5oTustPre5...
- mynet: AIzaSyBM0yjV8IPC-o9C...

### 已知問題

1. **原子序號遺失**：Gemini 有時不生成右上角數字
   - 暫時方案：後製加上數字（待實作）

2. **比例不穩定**：Gemini 生成的圖片長寬比 1.5~2.99
   - 已解決：強制裁切/縮放為 512×1024

3. **API Quota 超限**：並行請求過快
   - 已解決：改為循序生成 + 6.5 秒間隔

---

## 🤝 貢獻指南

待補充...

---

## 📄 授權

待決定...

---

## 📞 聯絡方式

待補充...

---

**最後更新**：2026-01-27
**目前版本**：v0.1-alpha（概念驗證階段）
